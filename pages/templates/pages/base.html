{% load static %}
<!doctype html>
<html lang="es-ar" data-bs-theme="dark">

<head>
    <meta charset="utf-8" />
    <title>{% block title %}Playground Viajes{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500,700|Lato:300,400,700" rel="stylesheet" />

    <style>
        :root {
            --bg: #0f1216;
            --card: #151a21;
            --muted: #a7b0be;
            --border: rgba(255, 255, 255, 0.08);
            --shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
            --text: #e9eef6;
            --link: #93c5fd;
            --link-hover: #bfdbfe;
        }

        body {
            font-family: "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(180deg, #0b0e12, #0f1216 30%, #0b0e12);
            color: var(--text);
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        span,
        small,
        li,
        label,
        dt,
        dd {
            color: inherit;
        }

        a {
            color: var(--link);
            text-decoration: none;
        }

        a:hover {
            color: var(--link-hover);
        }

        .text-dark,
        .text-body,
        .text-secondary {
            color: var(--text) !important;
        }

        .text-muted {
            color: var(--muted) !important;
        }

        .navbar {
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }

        .navbar-brand {
            font-family: "Montserrat", Arial, sans-serif;
            font-weight: 800;
            letter-spacing: 0.12em;
            text-transform: uppercase;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.75) !important;
        }

        .nav-link:hover {
            color: #fff !important;
        }

        header.masthead {
            position: relative;
            background-image: url("https://images.pexels.com/photos/346885/pexels-photo-346885.jpeg");
            background-size: cover;
            background-position: center;
            padding: 9rem 0 7rem;
            border-bottom: 1px solid var(--border);
        }

        header.masthead::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.55));
        }

        .masthead-content {
            position: relative;
            z-index: 2;
        }

        .masthead-heading {
            font-family: "Montserrat", Arial, sans-serif;
            font-size: 3rem;
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .masthead-subheading {
            color: rgba(255, 255, 255, 0.85);
            font-size: 1.15rem;
        }

        main {
            min-height: 70vh;
        }

        .page-title {
            font-family: "Montserrat", Arial, sans-serif;
            font-weight: 800;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            border-radius: 18px;
            color: var(--text);
        }

        .btn {
            border-radius: 12px;
        }

        .btn-outline-light {
            border-color: rgba(255, 255, 255, 0.25);
            color: rgba(255, 255, 255, 0.9);
        }

        .btn-outline-light:hover {
            border-color: rgba(255, 255, 255, 0.55);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-control,
        .form-select {
            background: #0f131a;
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: var(--text);
            border-radius: 12px;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: rgba(13, 110, 253, 0.6);
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.18);
        }

        .table {
            color: var(--text);
        }

        .table-light {
            --bs-table-bg: rgba(255, 255, 255, 0.06);
            --bs-table-color: var(--text);
        }

        .dropdown-menu {
            background: #11161d;
            border: 1px solid var(--border);
            border-radius: 14px;
            box-shadow: var(--shadow);
        }

        .dropdown-item {
            color: rgba(255, 255, 255, 0.85);
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
        }

        footer {
            border-top: 1px solid var(--border);
            padding: 1.75rem 0;
            color: rgba(255, 255, 255, 0.45);
        }
    </style>

    {% block extra_head %}{% endblock %}
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}">Playground Viajes</a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'about' %}">Acerca de mí</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'pages_list' %}">Viajes</a>
                    </li>

                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="btn btn-primary btn-sm px-3" href="{% url 'page_create' %}">Publicar viaje</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Datos
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'categoria_create' %}">Nueva categoría</a></li>
                            <li><a class="dropdown-item" href="{% url 'destino_create' %}">Nuevo destino</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile' %}">Perfil</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'messaging:inbox' %}">Mensajes</a>
                    </li>

                    <li class="nav-item">
                        <form action="{% url 'logout' %}" method="post" class="d-inline">
                            {% csrf_token %}
                            <button class="btn btn-link nav-link px-2" type="submit">Logout</button>
                        </form>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="btn btn-outline-light btn-sm px-3" href="{% url 'login' %}">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary btn-sm px-3" href="{% url 'signup' %}">Registrarme</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    {% if request.resolver_match.url_name == "home" %}
    <header class="masthead">
        <div class="container text-center masthead-content">
            <h1 class="masthead-heading mb-3">Tu diario de viajes</h1>
            <p class="masthead-subheading mb-4">
                Guardá experiencias, inspirá a otros viajeros y organizá tus destinos.
            </p>
            <div class="d-flex justify-content-center gap-2">
                <a class="btn btn-primary btn-lg px-4" href="{% url 'pages_list' %}">Explorar viajes</a>
                {% if user.is_authenticated %}
                <a class="btn btn-outline-light btn-lg px-4" href="{% url 'page_create' %}">Publicar</a>
                {% else %}
                <a class="btn btn-outline-light btn-lg px-4" href="{% url 'signup' %}">Crear cuenta</a>
                {% endif %}
            </div>
        </div>
    </header>
    {% endif %}

    <main class="py-5">
        <div class="container pt-3">

            {% if messages %}
            <div class="mb-3">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            {% block content %}{% endblock %}
        </div>
    </main>

    <footer class="text-center">
        <div class="container">
            <div class="small">
                &copy; {{ now|date:"Y" }} PlaygroundFinalTereso · Blog de viajes · Agustina Tereso
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>